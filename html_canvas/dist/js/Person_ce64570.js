function Person(t,i,s){this.name=t||"人",this.age=i,this.skill=s,Person.persons.push(this)}Person.persons=[],Person.prototype={x:0,y:0,blood:10,attackSkills:[],moveInterval:1,toString:function(){return"我是"+this.name+", 今年"+this.age+"岁.我最擅长"+this.skill},changeBlood:function(t){return this.blood<=0?void console.info(this.name+"已经死了."):(this.blood+=t,void(this.blood<=0&&console.info(this.name+"死了_(:з」∠)_")))},robSeat:function(){this.targetSeat.setOwner(this)},canStand:function(t){return t===this.world.grass||t===this.name},walkInWorld:function(){for(var t=Util.getRandomInt(0,this.world.width-1),i=Util.getRandomInt(0,this.world.height-1),s=this.world.ground[t][i],o=0;!this.canStand(s);)o++,o>1e3&&(console.info("dead loop"),console.info(t+", "+i+":"+s),console.info(this.name+":"+this.x+", "+this.y)),t=Util.getRandomInt(0,this.world.width-1),i=Util.getRandomInt(0,this.world.height-1),s=this.world.ground[t][i];this.scan(),this.world.reset(this.x,this.y),this.world.setPerson(t,i,this),this.setPosition(t,i)},setPosition:BaseBehavior.setPosition,move:function(t){if(isNaN(this.stepCount)&&(this.stepCount=1),this.stepCount!==this.moveInterval)return this.stepCount++,!1;var i=this.x,s=this.y;switch(t.toLowerCase()){case"up":s=this.y-1;break;case"down":s=this.y+1;break;case"left":i=this.x-1;break;case"right":i=this.x+1;break;default:return console.warn("Invalid direction:"+t),!1}return Util.isInWorld(i,s)?this.world.ground[i][s]!==World.grass?!1:(this.x=i,this.y=s,this.stepCount=1,!0):(console.info("Not in world"),!1)},scan:function(){for(var t=[],i=0;i<this.world.width;i++)for(var s=0;s<this.world.height;s++)this.detectEnemy(i,s,t);var o=this;return t.forEach(function(t){o.attack(t)}),t},isEnemy:function(t){return t!==this.world.grass&&t!==this.name&&t!==this.world.stone&&t!==this.world.wall},detectEnemy:function(t,i,s){var o=this.world.ground[t][i];if(this.isEnemy(o))if(t===this.x||i===this.y){{this.x,this.y}this.world.stoneBetweenPersons(t,i,this.x,this.y)?console.info(this.name+"探查中,由于"+o+"被石头挡住,没被发现..."):(console.info(this.name+"在("+t+", "+i+")发现敌人"+o),s.push(this.world.personRecord[t][i]))}else(1===Math.abs(t-this.x)||1===Math.abs(i-this.y))&&console.info(this.name+"感觉附近有动静,但是没发现敌人,蛋疼菊紧...")},addAttackSkill:function(t){this.attackSkills.push(t)},attack:function(t){this.attackSkills[0].attack(this,t)},draw:function(){if(!this.isRemoved){var t=(this.x+.5)*Config.brickWidth,i=(this.y+.5)*Config.brickWidth,s=Config.brickWidth/2,o=window.pen;o.beginPath(),o.arc(t,i,s,0,2*Math.PI,!1),o.closePath(),o.fillStyle="#000000",o.fill();var n=this.x*Config.brickWidth+5,e=(this.y+1)*Config.brickWidth-10;o.fillStyle="#ffffff",o.font="italic 25px sans-serif",o.fillText(this.name[0],n,e)}},act:BaseBehavior.act,moveInPath:BaseBehavior.moveInPath};